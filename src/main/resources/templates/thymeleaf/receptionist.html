<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Receptionist</title>
    <link rel="stylesheet" href="/styles/receptionist.css">
</head>
<body>
<div class="main-container">
    <!-- Improved Sidebar Navigation -->
    <nav class="sidebar">
        <div class="user-info">
            <strong th:text="${name}"></strong>
            <div class="stats">
                <span th:text="'Chips: ' + ${chips}"></span><br>
                <span th:text="'$' + ${money}"></span>
            </div>
        </div>
        <div class="divider"></div>
        <div class="back-link">
            <a href="/welcome">
                <button type="button" class="back-button">Back to Welcome</button>
            </a>
        </div>
        <div style="flex:1"></div>
        <button class="rules-button" onclick="showRules()">Game Rules</button>
    </nav>

    <!-- Main Card Content -->
    <div class="card">
        <h1 style="text-align:center;">Reception Desk</h1>
        <div class="section">
            <h2>Exchange Money for Chips</h2>
            <form action="/exchange-money-for-chips" method="post">
                <label for="money">Amount to exchange:</label>
                <input type="number" id="money" name="money" min="1" th:max="${money}" required>
                <button type="submit">Exchange</button>
            </form>
        </div>
        <div class="section">
            <h2>Exchange Chips for Money</h2>
            <form action="/exchange-chips-for-money" method="post">
                <label for="chips">Amount to exchange:</label>
                <input type="number" id="chips" name="chips" min="1" th:max="${chips}" required>
                <button type="submit">Exchange</button>
            </form>
        </div>
        <div class="section">
            <h2>Pick Card Deck</h2>
            <form action="/select-deck" method="post">
                <label for="deck">Choose a deck:</label>
                <select id="deck" name="deck">
                    <option value="minimalista" th:attr="selected=${deckStyle == 'minimalista'}">Minimalista</option>
                    <option value="pixel art" th:attr="selected=${deckStyle == 'pixel art'}">Pixel Art</option>
                    <option value="balatro" th:attr="selected=${deckStyle == 'balatro'}">Balatro</option>
                </select>
                <button type="submit">Select</button>
            </form>
        </div>
        <div class="section">
            <h2 class="deck-preview-title">Deck Preview</h2>
            <div class="card-container">
                <img th:src="${previewCards[0].imagePath}" alt="Card Image">
                <img th:src="${previewCards[1].imagePath}" alt="Card Image">
                <img th:src="${previewCards[2].imagePath}" alt="Card Image">
            </div>
        </div>
        <p class="success-message" th:if="${successMessage != null}" th:text="${successMessage}"></p>
    </div>
</div>

<!-- Rules Popup (unchanged) -->
<div class="overlay" id="overlay" onclick="hideRules()"></div>
<div class="rules-popup" id="rulesPopup">
    <span class="popup-close" onclick="hideRules()">Ã—</span>
    <h2 class="rules-title">Game Rules</h2>
    <div id="game-selection" class="game-rules active">
        <h3>Select a Game to View Rules</h3>
        <div class="game-buttons">
            <button onclick="selectGame('blackjack')">Blackjack</button>
            <button onclick="selectGame('bingo')">Bingo</button>
            <button onclick="selectGame('slots')">Slots</button>
            <button onclick="selectGame('higherorlower')">Higher or Lower</button>
            <button onclick="selectGame('ridethebus')">Ride the Bus</button>
        </div>
    </div>
    <div id="blackjack-rules" class="game-rules">...</div>
    <div id="bingo-rules" class="game-rules">...</div>
    <div id="slots-rules" class="game-rules">...</div>
    <div id="higherorlower-rules" class="game-rules">...</div>
    <div id="ridethebus-rules" class="game-rules">...</div>
</div>
<script>
    // (existing JS unchanged)
    const games = ['blackjack', 'bingo', 'slots', 'higherorlower', 'ridethebus'];
    function showRules() {
        document.getElementById('overlay').style.display = 'block';
        document.getElementById('rulesPopup').style.display = 'block';
        showGameSelection();
    }
    function hideRules() {
        document.getElementById('overlay').style.display = 'none';
        document.getElementById('rulesPopup').style.display = 'none';
    }
    function showGameSelection() {
        document.querySelectorAll('.game-rules').forEach(el => el.classList.remove('active'));
        document.getElementById('game-selection').classList.add('active');
    }
    function selectGame(game) {
        document.querySelectorAll('.game-rules').forEach(el => el.classList.remove('active'));
        document.getElementById(`${game}-rules`).classList.add('active');
    }
    function backToSelection() { showGameSelection(); }
</script>
</body>
</html>