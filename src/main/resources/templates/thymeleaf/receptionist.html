<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Receptionist</title>
    <link rel="stylesheet" href="/styles/receptionist.css">
</head>
<body>
<h1>Welcome to the Receptionist, <span th:text="${name}"></span>!</h1>
<p>You currently have <span th:text="${chips}"></span> chips and $<span th:text="${money}"></span>.</p>

<button class="rules-button" onclick="showRules()">View Game Rules</button>

<h2>Exchange Money for Chips</h2>
<form action="/exchange-money-for-chips" method="post">
    <label for="money">Enter amount of money to exchange:</label>
    <input type="number" id="money" name="money" min="1" required>
    <button type="submit">Exchange</button>
</form>

<h2>Exchange Chips for Money</h2>
<form action="/exchange-chips-for-money" method="post">
    <label for="chips">Enter amount of chips to exchange:</label>
    <input type="number" id="chips" name="chips" min="1" required>
    <button type="submit">Exchange</button>
</form>

<h2>Pick Card Deck</h2>
<form action="/select-deck" method="post">
    <label for="deck">Choose a deck:</label>
    <select id="deck" name="deck">
        <option value="minimalista" th:attr="selected=${deckStyle == 'minimalista'}">Minimalista</option>
        <option value="pixel Art" th:attr="selected=${deckStyle == 'pixel Art'}">Pixel Art</option>
        <option value="balatro" th:attr="selected=${deckStyle == 'balatro'}">Balatro</option>
    </select>
    <button type="submit">Select</button>
</form>

<p class="success-message" th:if="${successMessage != null}" th:text="${successMessage}"></p>

<h2>Deck Preview</h2>
<div>
    <p>Preview of the selected deck:</p>
    <div class="card-container">
        <img th:src="${previewCards[0].imagePath}" alt="Card Image">
        <img th:src="${previewCards[1].imagePath}" alt="Card Image">
        <img th:src="${previewCards[2].imagePath}" alt="Card Image">
    </div>
</div>

<a href="/welcome">Back to Welcome</a>

<div class="overlay" id="overlay" onclick="hideRules()"></div>
<div class="rules-popup" id="rulesPopup">
    <span class="popup-close" onclick="hideRules()">×</span>

    <h2 class="rules-title">Game Rules</h2>

    <!-- Game Selection Screen -->
    <div id="game-selection" class="game-rules active">
        <h3>Select a Game to View Rules</h3>
        <div class="game-buttons">
            <button onclick="selectGame('blackjack')">Blackjack</button>
            <button onclick="selectGame('bingo')">Bingo</button>
            <button onclick="selectGame('slots')">Slots</button>
            <button onclick="selectGame('higherorlower')">Higher or Lower</button>
            <button onclick="selectGame('ridethebus')">Ride the Bus</button>
        </div>
    </div>

    <!-- Blackjack Rules -->
    <div id="blackjack-rules" class="game-rules">
        <h3>Blackjack Rules</h3>
        <p>Blackjack is a card game where the goal is to have a hand value closer to 21 than the dealer without going over.</p>
        <ul>
            <li>Cards 2-10 are worth their face value</li>
            <li>Face cards (Jack, Queen, King) are worth 10</li>
            <li>Aces are worth 1 or 11, whichever is more favorable</li>
            <li>If your first two cards total 21, you have a "blackjack"</li>
            <li>You can "hit" to take another card or "stand" to keep your current hand</li>
            <li>If you go over 21, you "bust" and lose</li>
            <li>The dealer must hit until they have at least 17</li>
        </ul>
        <button class="back-button" onclick="backToSelection()">Back to Game Selection</button>
    </div>

    <!-- Bingo Rules -->
    <div id="bingo-rules" class="game-rules">
        <h3>Bingo Rules</h3>
        <p>Bingo is a game of chance where players mark numbers on their cards as they are drawn randomly.</p>
        <ul>
            <li>Each player gets a card with 25 numbers arranged in a 5x5 grid</li>
            <li>The center square is a "free" space</li>
            <li>Numbers are drawn randomly one at a time</li>
            <li>If a drawn number appears on your card, it is marked</li>
            <li>The first player to complete a their card wins.</li>
            <li>In this version, you play against the house cards</li>
        </ul>
        <button class="back-button" onclick="backToSelection()">Back to Game Selection</button>
    </div>

    <!-- Slots Rules -->
    <div id="slots-rules" class="game-rules">
        <h3>Slots Rules</h3>
        <p>Slots is a game of chance where you spin the reels and hope to match symbols.</p>
        <ul>
            <li>The reels will spin and stop randomly</li>
            <li>If you get three matching symbols in a row, diagonal or column you win according to the payout table</li>
            <li>Different symbols have different payout values</li>
            <li>The 7️⃣ symbol has the highest payout at 10x your bet</li>
        </ul>
        <button class="back-button" onclick="backToSelection()">Back to Game Selection</button>
    </div>

    <!-- Higher or Lower Rules -->
    <div id="higherorlower-rules" class="game-rules">
        <h3>Higher or Lower Rules</h3>
        <p>Higher or Lower is a simple card game where you guess if the next card will be higher or lower than the current card.</p>
        <ul>
            <li>You are shown a card and must guess if the next card will be higher or lower</li>
            <li>If you guess correctly, you progress in the round</li>
            <li>After each each set of rounds, you can choose to leave with your winnings or continue playing</li>
            <li>After each set of rounds the necessary rounds to leave increases by 1, and the payout doubles.</li>
            <li>If you guess incorrectly, you lose your bet</li>
            <li>Aces are considered the highest card</li>
        </ul>
        <button class="back-button" onclick="backToSelection()">Back to Game Selection</button>
    </div>

    <!-- Ride the Bus Rules -->
    <div id="ridethebus-rules" class="game-rules">
        <h3>Ride the Bus Rules</h3>
        <p>Ride the Bus is a card game with four rounds of increasing difficulty:</p>
        <ol>
            <li><strong>Round 1:</strong> Guess if the card is Red or Black</li>
            <li><strong>Round 2:</strong> Guess if the next card is Higher or Lower than the previous card</li>
            <li><strong>Round 3:</strong> Guess if the next card is Inside or Outside the range of the first two cards</li>
            <li><strong>Round 4:</strong> Guess the suit of the next card (Hearts, Diamonds, Clubs, or Spades)</li>
        </ol>
        <p>Each correct guess increases your multiplier. You can choose to leave with your winnings after each round (except the first).</p>
        <button class="back-button" onclick="backToSelection()">Back to Game Selection</button>
    </div>
</div>

<script>
    const games = ['blackjack', 'bingo', 'slots', 'higherorlower', 'ridethebus'];

    function showRules() {
        document.getElementById('overlay').style.display = 'block';
        document.getElementById('rulesPopup').style.display = 'block';

        // Show the game selection screen by default
        showGameSelection();
    }

    function hideRules() {
        document.getElementById('overlay').style.display = 'none';
        document.getElementById('rulesPopup').style.display = 'none';
    }

    function showGameSelection() {
        // Hide all game rules
        document.querySelectorAll('.game-rules').forEach(el => {
            el.classList.remove('active');
        });

        // Show the game selection screen
        document.getElementById('game-selection').classList.add('active');
    }

    function selectGame(game) {
        // Hide all game rules
        document.querySelectorAll('.game-rules').forEach(el => {
            el.classList.remove('active');
        });

        // Show the selected game rules
        document.getElementById(`${game}-rules`).classList.add('active');
    }

    function backToSelection() {
        showGameSelection();
    }
</script>
</body>
</html>
